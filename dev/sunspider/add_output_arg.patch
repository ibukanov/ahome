Index: sunspider
===================================================================
--- sunspider	(revision 77121)
+++ sunspider	(working copy)
@@ -45,6 +45,7 @@
 my $setBaseline = 0;
 my $testsPattern;
 my $testRuns = 10;
+my $outputFile = "";
 
 my $programName = basename($0);
 my $usage = <<EOF;
@@ -62,6 +63,7 @@
   --ubench          Use microbenchmark suite instead of regular tests. Same as --suite=ubench
   --v8-suite        Use the V8 benchmark suite. Same as --suite=v8-v4
   --parse-only      Use the parse-only benchmark suite. Same as --suite=parse-only
+  --output          The result file name
 EOF
 
 GetOptions('runs=i' => \$testRuns,
@@ -76,6 +78,7 @@
            'v8-suite' => \$v8suite,
            'parse-only' => \$parseOnly,
            'tests=s' => \$testsPattern,
+           'output=s' => \$outputFile,
            'help' => \$showHelp);
 
 
@@ -150,7 +153,7 @@
 
 my $timeString = strftime "%Y-%m-%d-%H.%M.%S", localtime $^T;
 my $prefixFile = "$resultDirectory/sunspider-test-prefix.js";
-my $resultsFile = "$resultDirectory/sunspider-results-$timeString.js";
+my $resultsFile = $outputFile || "$resultDirectory/sunspider-results-$timeString.js";
 
 sub writePrefixFile()
 {
@@ -206,8 +209,6 @@
 }
 die "No tests to run"  unless scalar(@tests);
 print STDERR "Running SunSpider once for warmup, then " . ($runShark ? "under Shark" : "$testRuns time" . ($testRuns == 1 ? "" : "s")) . "\n";
-writePrefixFile();
-
 runTestsOnce(0);
 print "Discarded first run.\n";
 
@@ -230,6 +231,7 @@
 dumpToFile($output, $resultsFile);
 dumpToFile(File::Spec->rel2abs($resultsFile), "$resultDirectory/baseline-filename.txt") if $setBaseline;
 
+
 system("$jsShellPath", "-f", $prefixFile, "-f", $resultsFile, "-f", "resources/sunspider-analyze-results.js");
 
 print("\nResults are located at $resultsFile\n");
