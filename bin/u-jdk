#!/bin/bash

java_home="$1"
shift

if test "_$java_home" = "_default" -o "_$java_home" = "_def"; then
    # default to ~/opt/jdk if it exists or to the system JDK
    dir="$HOME/opt/jdk"
    if test -d "$dir"; then
	java_home="$dir"
    else
	java_home=""
    fi
elif test "_${java_home/\//}" = "_$java_home"; then
    # Given java_home has no sllashes, assume a name under ~/opt
    dir="$HOME/opt/$java_home"
    test -d "$dir" && java_home="$dir"
fi

if test -n "$java_home"; then
    export JAVA_HOME="$java_home"
    export PATH="$java_home/bin:$PATH"
fi
exec "${@}"
